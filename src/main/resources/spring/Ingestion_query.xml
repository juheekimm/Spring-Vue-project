<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.model.dao.IngestionDAO">
	<insert id="add"		parameterType="ingestion">
   		insert into ingestion (id, code, ingdate, quantity)
   		values ( #{id:VARCHAR}
   		        ,#{code:INTEGER}
   		        , now()
   		        ,#{quantity:INTEGER}
   		        )
   </insert>
   
   <delete id="remove" 		parameterType="integer">
   		delete from ingestion where ino=#{ino}
   </delete>
   
   <update id="update"		parameterType="ingestion">
   		update ingestion set id = #{id:VARCHAR}
		   		        ,code = #{code:INTEGER}
		   		        ,ingdate = #{ingdate:VARCHAR}
		   		        ,quantity = #{quantity:INTEGER}
   		where ino=#{ino:INTEGER}
   </update>
   
   <select id="search"		 parameterType="string"    resultType="ingestion">
   		select * from ingestion  where ino=#{ino}
   </select>
   
   <select id="searchAll"	parameterType="string"	resultType="ingestion">
   		select ino, id, code, ingdate, quantity
			, (f.name) as foodName
			, f.material as material
			, u.allergy as allergy
			,f.img as foodImg
            ,calory
		from ingestion join food f using (code) join user u using (id)
		where id=#{id}
		order by ingdate desc;
   </select>
   
   <select id="searchNutrient" parameterType="string" resultType="food">
   		select calory, carbo, protein, fat, sugar, natrium, chole, fattyacid, transfat
		from ingestion i
		join food f
		using (code)
		where id=#{id};
   </select>
   
   
</mapper>
























































	












